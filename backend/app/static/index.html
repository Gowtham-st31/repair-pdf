<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/styles.css?v=5" />
  </head>
  <body class="bg-slate-50 text-slate-900">
    <div class="pointer-events-none fixed inset-0 -z-10 overflow-hidden">
      <div class="absolute -top-24 left-1/2 h-80 w-[40rem] -translate-x-1/2 rounded-full bg-gradient-to-r from-slate-200 via-white to-slate-200 blur-3xl opacity-70 floaty"></div>
      <div class="absolute -bottom-32 left-1/2 h-80 w-[46rem] -translate-x-1/2 rounded-full bg-gradient-to-r from-slate-100 via-white to-slate-100 blur-3xl opacity-70 floaty" style="animation-delay: -2.4s"></div>
    </div>

    <div class="min-h-screen">
      <header class="mx-auto max-w-5xl px-4 pt-10 pb-6">
        <div class="flex items-center justify-between gap-4">
          <div>
            <h1 class="text-2xl font-semibold tracking-tight">PDF Editor</h1>
            <p class="mt-1 text-sm text-slate-600">
              Find/replace text, merge PDFs, reorder pages, and remove pages.
            </p>
          </div>
          <div class="hidden sm:block text-xs text-slate-500">Local, runs on FastAPI</div>
        </div>

        <nav class="mt-6">
          <div class="flex flex-wrap gap-2">
            <button
              id="tab-find"
              type="button"
              class="rounded-full border px-4 py-2 text-sm transition duration-200 hover:-translate-y-0.5 hover:bg-white active:translate-y-0"
            >
              Find & Replace
            </button>
            <button
              id="tab-merge"
              type="button"
              class="rounded-full border px-4 py-2 text-sm transition duration-200 hover:-translate-y-0.5 hover:bg-white active:translate-y-0"
            >
              Merge PDFs
            </button>
            <button
              id="tab-reorder"
              type="button"
              class="rounded-full border px-4 py-2 text-sm transition duration-200 hover:-translate-y-0.5 hover:bg-white active:translate-y-0"
            >
              Change Pages
            </button>
            <button
              id="tab-remove"
              type="button"
              class="rounded-full border px-4 py-2 text-sm transition duration-200 hover:-translate-y-0.5 hover:bg-white active:translate-y-0"
            >
              Remove Pages
            </button>
          </div>
        </nav>
      </header>

      <main class="mx-auto max-w-5xl px-4 pb-16">
        <section class="rounded-2xl border border-slate-200 bg-white">
          <div class="border-b border-slate-200 px-6 py-5">
            <div class="flex items-center justify-between">
              <div class="text-sm font-medium">Tools</div>
              <div class="text-xs text-slate-500">Output downloads as PDF</div>
            </div>
          </div>

          <div class="p-6">
            <!-- Find & Replace -->
            <div id="panel-find" class="hidden">
              <div class="mb-4">
                <h2 class="text-lg font-semibold">Find & Replace Text</h2>
                <p class="mt-1 text-sm text-slate-600">
                  Choose all pages or a specific page.
                </p>
              </div>

              <form id="form-find" data-preview-id="preview-find" class="space-y-4">
                <div>
                  <label class="text-sm font-medium">PDF file</label>
                  <input
                    id="pdf-find"
                    name="pdf"
                    type="file"
                    accept="application/pdf"
                    required
                    class="mt-2 block w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm file:mr-4 file:rounded-lg file:border-0 file:bg-slate-900 file:px-4 file:py-2 file:text-sm file:font-medium file:text-white"
                  />
                </div>

                <div class="rounded-xl border border-slate-200 p-4">
                  <div class="flex items-center justify-between">
                    <div class="text-sm font-medium">Preview</div>
                    <div class="text-xs text-slate-500">Scroll to view pages</div>
                  </div>
                  <div id="preview-find" class="mt-3 h-[28rem] overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-2"></div>
                </div>

                <div class="grid gap-3 sm:grid-cols-2">
                  <div>
                    <label class="text-sm font-medium">Find text</label>
                    <input
                      name="findText"
                      type="text"
                      required
                      class="mt-2 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                      placeholder="e.g. Invoice"
                    />
                  </div>
                  <div>
                    <label class="text-sm font-medium">Replace with</label>
                    <input
                      name="replaceText"
                      type="text"
                      class="mt-2 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                      placeholder="e.g. Receipt"
                    />
                  </div>
                </div>

                <div>
                  <label class="text-sm font-medium">Replacement font</label>
                  <select
                    name="fontChoice"
                    class="mt-2 block w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm"
                  >
                    <option value="auto" selected>Auto (match original)</option>
                    <option value="times">Times New Roman</option>
                    <option value="calibri">Calibri</option>
                    <option value="cambria">Cambria</option>
                    <option value="constantia">Constantia</option>
                    <option value="georgia">Georgia</option>
                    <option value="garamond">Garamond</option>
                    <option value="palatino">Palatino Linotype</option>
                    <option value="arial">Arial</option>
                    <option value="helvetica">Helvetica</option>
                    <option value="courier">Courier (Monospace)</option>
                    <option value="dejavu-serif">DejaVu Serif (Linux)</option>
                    <option value="dejavu-sans">DejaVu Sans (Linux)</option>
                    <option value="liberation-serif">Liberation Serif (Linux)</option>
                    <option value="liberation-sans">Liberation Sans (Linux)</option>
                  </select>
                  <div class="mt-2 text-xs text-slate-500">Use this if the replaced text font doesn’t match.</div>
                </div>

                <div>
                  <label class="text-sm font-medium">Upload fonts (optional)</label>
                  <input
                    name="extraFonts"
                    type="file"
                    accept=".ttf,.otf"
                    multiple
                    class="mt-2 block w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm file:mr-4 file:rounded-lg file:border-0 file:bg-slate-900 file:px-4 file:py-2 file:text-sm file:font-medium file:text-white"
                  />
                  <div class="mt-2 text-xs text-slate-500">
                    For exact matching, upload the same font files used by the PDF (TTF/OTF).
                  </div>
                </div>

                <div class="rounded-xl border border-slate-200 p-4">
                  <div class="text-sm font-medium">Scope</div>
                  <div class="mt-3 flex flex-wrap gap-4 text-sm">
                    <label class="inline-flex items-center gap-2">
                      <input id="scope-all" type="radio" name="scope" value="all" checked />
                      <span>All pages</span>
                    </label>
                    <label class="inline-flex items-center gap-2">
                      <input id="scope-range" type="radio" name="scope" value="range" />
                      <span>Page range</span>
                    </label>
                  </div>
                  <div id="range-wrap" class="mt-3 hidden">
                    <div class="grid gap-3 sm:grid-cols-2">
                      <div>
                        <label class="text-sm font-medium">From page (1-based)</label>
                        <input
                          name="fromPage"
                          type="number"
                          min="1"
                          class="mt-2 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                          placeholder="1"
                        />
                      </div>
                      <div>
                        <label class="text-sm font-medium">To page (1-based)</label>
                        <input
                          name="toPage"
                          type="number"
                          min="1"
                          class="mt-2 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                          placeholder="1"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3">
                  <button
                    type="button"
                    data-apply
                    class="rounded-xl bg-slate-900 px-4 py-2 text-sm font-medium text-white transition duration-200 hover:-translate-y-0.5 hover:bg-slate-800 active:translate-y-0"
                  >
                    Apply
                  </button>
                  <button
                    type="button"
                    data-download
                    disabled
                    class="rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-900 transition duration-200 hover:-translate-y-0.5 hover:bg-slate-50 active:translate-y-0 disabled:cursor-not-allowed disabled:opacity-60"
                  >
                    Download
                  </button>
                  <div class="min-w-[16rem]">
                    <label class="block text-xs text-slate-500">Output filename</label>
                    <input
                      data-filename
                      type="text"
                      value="find-replace.pdf"
                      class="mt-1 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                    />
                  </div>
                  <div data-hint class="text-sm text-slate-500"></div>
                </div>

                <div data-error class="text-sm text-rose-600"></div>
              </form>
            </div>

            <!-- Merge -->
            <div id="panel-merge" class="hidden">
              <div class="mb-4">
                <h2 class="text-lg font-semibold">Merge PDFs</h2>
                <p class="mt-1 text-sm text-slate-600">Upload multiple PDFs to merge into one.</p>
              </div>

              <form id="form-merge" data-preview-id="preview-merge" class="space-y-4">
                <div>
                  <label class="text-sm font-medium">PDF files</label>
                  <input
                    id="pdf-merge"
                    name="pdfs"
                    type="file"
                    accept="application/pdf"
                    multiple
                    required
                    class="mt-2 block w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm file:mr-4 file:rounded-lg file:border-0 file:bg-slate-900 file:px-4 file:py-2 file:text-sm file:font-medium file:text-white"
                  />
                  <div class="mt-2 text-xs text-slate-500">Merged in the order you pick.</div>
                </div>

                <div class="rounded-xl border border-slate-200 p-4">
                  <div class="flex items-center justify-between">
                    <div class="text-sm font-medium">Preview (first selected)</div>
                    <div class="text-xs text-slate-500">Scroll to view pages</div>
                  </div>
                  <div id="preview-merge" class="mt-3 h-[28rem] overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-2"></div>
                </div>

                <div class="flex flex-wrap items-center gap-3">
                  <button
                    type="button"
                    data-apply
                    class="rounded-xl bg-slate-900 px-4 py-2 text-sm font-medium text-white transition duration-200 hover:-translate-y-0.5 hover:bg-slate-800 active:translate-y-0"
                  >
                    Merge
                  </button>
                  <button
                    type="button"
                    data-download
                    disabled
                    class="rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-900 transition duration-200 hover:-translate-y-0.5 hover:bg-slate-50 active:translate-y-0 disabled:cursor-not-allowed disabled:opacity-60"
                  >
                    Download
                  </button>
                  <div class="min-w-[16rem]">
                    <label class="block text-xs text-slate-500">Output filename</label>
                    <input
                      data-filename
                      type="text"
                      value="merged.pdf"
                      class="mt-1 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                    />
                  </div>
                  <div data-hint class="text-sm text-slate-500"></div>
                </div>

                <div data-error class="text-sm text-rose-600"></div>
              </form>
            </div>

            <!-- Reorder -->
            <div id="panel-reorder" class="hidden">
              <div class="mb-4">
                <h2 class="text-lg font-semibold">Change Pages Order</h2>
                <p class="mt-1 text-sm text-slate-600">
                  Enter the new order as a comma-separated list (1-based), e.g. <span class="font-medium">3,1,2</span>.
                </p>
              </div>

              <form id="form-reorder" data-preview-id="preview-reorder" class="space-y-4">
                <div>
                  <label class="text-sm font-medium">PDF file</label>
                  <input
                    id="pdf-reorder"
                    name="pdf"
                    type="file"
                    accept="application/pdf"
                    required
                    class="mt-2 block w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm file:mr-4 file:rounded-lg file:border-0 file:bg-slate-900 file:px-4 file:py-2 file:text-sm file:font-medium file:text-white"
                  />
                </div>

                <div class="rounded-xl border border-slate-200 p-4">
                  <div class="flex items-center justify-between">
                    <div class="text-sm font-medium">Preview</div>
                    <div class="text-xs text-slate-500">Scroll to view pages</div>
                  </div>
                  <div id="preview-reorder" class="mt-3 h-[28rem] overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-2"></div>
                </div>

                <div>
                  <label class="text-sm font-medium">Reorder pages (drag with mouse)</label>
                  <input id="order-input" name="order" type="hidden" required />
                  <div class="mt-2 rounded-xl border border-slate-200 bg-white p-3">
                    <div class="text-xs text-slate-500">Drag items to swap order.</div>
                    <div id="reorder-list" class="mt-3 grid gap-2 sm:grid-cols-2"></div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3">
                  <button
                    type="button"
                    data-apply
                    class="rounded-xl bg-slate-900 px-4 py-2 text-sm font-medium text-white transition duration-200 hover:-translate-y-0.5 hover:bg-slate-800 active:translate-y-0"
                  >
                    Reorder
                  </button>
                  <button
                    type="button"
                    data-download
                    disabled
                    class="rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-900 transition duration-200 hover:-translate-y-0.5 hover:bg-slate-50 active:translate-y-0 disabled:cursor-not-allowed disabled:opacity-60"
                  >
                    Download
                  </button>
                  <div class="min-w-[16rem]">
                    <label class="block text-xs text-slate-500">Output filename</label>
                    <input
                      data-filename
                      type="text"
                      value="reordered.pdf"
                      class="mt-1 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                    />
                  </div>
                  <div data-hint class="text-sm text-slate-500"></div>
                </div>

                <div data-error class="text-sm text-rose-600"></div>
              </form>
            </div>

            <!-- Remove pages -->
            <div id="panel-remove" class="hidden">
              <div class="mb-4">
                <h2 class="text-lg font-semibold">Remove Pages</h2>
                <p class="mt-1 text-sm text-slate-600">
                  Provide pages like <span class="font-medium">2,4-6</span> (1-based).
                </p>
              </div>

              <form id="form-remove" data-preview-id="preview-remove" class="space-y-4">
                <div>
                  <label class="text-sm font-medium">PDF file</label>
                  <input
                    id="pdf-remove"
                    name="pdf"
                    type="file"
                    accept="application/pdf"
                    required
                    class="mt-2 block w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm file:mr-4 file:rounded-lg file:border-0 file:bg-slate-900 file:px-4 file:py-2 file:text-sm file:font-medium file:text-white"
                  />
                </div>

                <div class="rounded-xl border border-slate-200 p-4">
                  <div class="flex items-center justify-between">
                    <div class="text-sm font-medium">Preview</div>
                    <div class="text-xs text-slate-500">Scroll to view pages</div>
                  </div>
                  <div id="preview-remove" class="mt-3 h-[28rem] overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-2"></div>
                </div>

                <div>
                  <label class="text-sm font-medium">Pages to remove</label>
                  <input id="pages-input" name="pages" type="hidden" required />
                  <div class="mt-2 rounded-xl border border-slate-200 bg-white p-3">
                    <div class="text-xs text-slate-500">Select pages (checked pages will be removed).</div>
                    <div id="remove-pages" class="mt-3 grid gap-2 sm:grid-cols-3"></div>
                  </div>
                </div>

                <div class="flex flex-wrap items-center gap-3">
                  <button
                    type="button"
                    data-apply
                    class="rounded-xl bg-slate-900 px-4 py-2 text-sm font-medium text-white transition duration-200 hover:-translate-y-0.5 hover:bg-slate-800 active:translate-y-0"
                  >
                    Remove
                  </button>
                  <button
                    type="button"
                    data-download
                    disabled
                    class="rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-900 transition duration-200 hover:-translate-y-0.5 hover:bg-slate-50 active:translate-y-0 disabled:cursor-not-allowed disabled:opacity-60"
                  >
                    Download
                  </button>
                  <div class="min-w-[16rem]">
                    <label class="block text-xs text-slate-500">Output filename</label>
                    <input
                      data-filename
                      type="text"
                      value="pages-removed.pdf"
                      class="mt-1 block w-full rounded-xl border border-slate-200 px-3 py-2 text-sm"
                    />
                  </div>
                  <div data-hint class="text-sm text-slate-500"></div>
                </div>

                <div data-error class="text-sm text-rose-600"></div>
              </form>
            </div>
          </div>
        </section>

        <footer class="mt-6 text-xs text-slate-500">
          Note: Find/replace works on searchable text in the PDF. Some PDFs are scanned images and won’t contain editable text.
        </footer>
      </main>
    </div>

    <!-- Page maximize lightbox -->
    <div
      id="page-lightbox"
      class="fixed inset-0 z-50 hidden items-center justify-center bg-slate-900/60 p-4"
      role="dialog"
      aria-modal="true"
      aria-label="Page preview"
    >
      <div class="w-full max-w-5xl">
        <div class="mb-3 flex items-center justify-between">
          <div id="page-lightbox-title" class="text-sm font-medium text-white">Page</div>
          <button
            id="page-lightbox-close"
            type="button"
            class="rounded-xl bg-white px-3 py-2 text-sm font-medium text-slate-900 transition duration-200 hover:-translate-y-0.5 hover:bg-slate-50 active:translate-y-0"
          >
            Close
          </button>
        </div>
        <div class="max-h-[80vh] overflow-auto rounded-2xl border border-slate-200 bg-white p-2">
          <img id="page-lightbox-img" alt="" class="mx-auto w-full rounded-xl" />
        </div>
      </div>
    </div>

    <script src="/static/app.js?v=9"></script>
  </body>
</html>
